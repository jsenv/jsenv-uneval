{"version":3,"file":"main.js","sources":["/src/internal/isComposite.js","/src/internal/global-value-path.js","/src/internal/decompose.js","/src/internal/sortRecipe.js","/src/internal/escapeString.js","/src/uneval.js"],"sourcesContent":["// https://developer.mozilla.org/en-US/docs/Glossary/Primitive\n\nexport const isComposite = (value) => {\n  if (value === null) return false\n  const type = typeof value\n  if (type === \"object\") return true\n  if (type === \"function\") return true\n  return false\n}\n","import { isComposite } from \"./isComposite.js\"\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap\nconst compositeWellKnownMap = new WeakMap()\nconst primitiveWellKnownMap = new Map()\n\nexport const getCompositeGlobalPath = (value) => compositeWellKnownMap.get(value)\n\nexport const getPrimitiveGlobalPath = (value) => primitiveWellKnownMap.get(value)\n\nconst visitGlobalObject = (value) => {\n  const visitValue = (value, path) => {\n    if (isComposite(value)) {\n      if (compositeWellKnownMap.has(value)) return // prevent infinite recursion\n      compositeWellKnownMap.set(value, path)\n\n      const visitProperty = (property) => {\n        let descriptor\n        try {\n          descriptor = Object.getOwnPropertyDescriptor(value, property)\n        } catch (e) {\n          if (e.name === \"SecurityError\") {\n            return\n          }\n          throw e\n        }\n\n        // do not trigger getter/setter\n        if (\"value\" in descriptor) {\n          const propertyValue = descriptor.value\n          visitValue(propertyValue, [...path, property])\n        }\n      }\n\n      Object.getOwnPropertyNames(value).forEach((name) => visitProperty(name))\n      Object.getOwnPropertySymbols(value).forEach((symbol) => visitProperty(symbol))\n    }\n\n    primitiveWellKnownMap.set(value, path)\n    return\n  }\n\n  visitValue(value, [])\n}\n\nif (typeof window === \"object\") visitGlobalObject(window)\n\nif (typeof global === \"object\") visitGlobalObject(global)\n","/**\n * transforms a javascript value into an object describing it.\n *\n */\n\nimport { isComposite } from \"./isComposite.js\"\nimport { getCompositeGlobalPath, getPrimitiveGlobalPath } from \"./global-value-path.js\"\n\nexport const decompose = (mainValue, { functionAllowed, prototypeStrict }) => {\n  const valueMap = {}\n  const recipeArray = []\n\n  const valueToIdentifier = (value, path = []) => {\n    if (!isComposite(value)) {\n      const existingIdentifier = identifierForPrimitive(value)\n      if (existingIdentifier !== undefined) return existingIdentifier\n      const identifier = identifierForNewValue(value)\n      recipeArray[identifier] = primitiveToRecipe(value)\n      return identifier\n    }\n\n    if (typeof Promise === \"function\" && value instanceof Promise)\n      throw new Error(createPromiseAreNotSupportedMessage({ path }))\n    if (typeof WeakSet === \"function\" && value instanceof WeakSet)\n      throw new Error(createWeakSetAreNotSupportedMessage({ path }))\n    if (typeof WeakMap === \"function\" && value instanceof WeakMap)\n      throw new Error(createWeakMapAreNotSupportedMessage({ path }))\n    if (typeof value === \"function\" && !functionAllowed)\n      throw new Error(createForbiddenFunctionMessage({ path }))\n\n    const existingIdentifier = identifierForComposite(value)\n    if (existingIdentifier !== undefined) return existingIdentifier\n    const identifier = identifierForNewValue(value)\n\n    const compositeGlobalPath = getCompositeGlobalPath(value)\n    if (compositeGlobalPath) {\n      recipeArray[identifier] = createGlobalReferenceRecipe(compositeGlobalPath)\n      return identifier\n    }\n\n    const propertyDescriptionArray = []\n    Object.getOwnPropertyNames(value).forEach((propertyName) => {\n      const propertyDescriptor = Object.getOwnPropertyDescriptor(value, propertyName)\n      const propertyNameIdentifier = valueToIdentifier(propertyName, [...path, propertyName])\n      const propertyDescription = computePropertyDescription(propertyDescriptor, propertyName, path)\n      propertyDescriptionArray.push({ propertyNameIdentifier, propertyDescription })\n    })\n\n    const symbolDescriptionArray = []\n    Object.getOwnPropertySymbols(value).forEach((symbol) => {\n      const propertyDescriptor = Object.getOwnPropertyDescriptor(value, symbol)\n      const symbolIdentifier = valueToIdentifier(symbol, [...path, `[${symbol.toString()}]`])\n      const propertyDescription = computePropertyDescription(propertyDescriptor, symbol, path)\n      symbolDescriptionArray.push({ symbolIdentifier, propertyDescription })\n    })\n\n    const methodDescriptionArray = computeMethodDescriptionArray(value, path)\n\n    const extensible = Object.isExtensible(value)\n\n    recipeArray[identifier] = createCompositeRecipe({\n      propertyDescriptionArray,\n      symbolDescriptionArray,\n      methodDescriptionArray,\n      extensible,\n    })\n    return identifier\n  }\n\n  const computePropertyDescription = (propertyDescriptor, propertyNameOrSymbol, path) => {\n    if (propertyDescriptor.set && !functionAllowed)\n      throw new Error(createForbiddenPropertySetterMessage({ path, propertyNameOrSymbol }))\n    if (propertyDescriptor.get && !functionAllowed)\n      throw new Error(createForbiddenPropertyGetterMessage({ path, propertyNameOrSymbol }))\n\n    return {\n      configurable: propertyDescriptor.configurable,\n      writable: propertyDescriptor.writable,\n      enumerable: propertyDescriptor.enumerable,\n      getIdentifier:\n        \"get\" in propertyDescriptor\n          ? valueToIdentifier(propertyDescriptor.get, [\n              ...path,\n              String(propertyNameOrSymbol),\n              \"[[descriptor:get]]\",\n            ])\n          : undefined,\n      setIdentifier:\n        \"set\" in propertyDescriptor\n          ? valueToIdentifier(propertyDescriptor.set, [\n              ...path,\n              String(propertyNameOrSymbol),\n              \"[[descriptor:set]]\",\n            ])\n          : undefined,\n      valueIdentifier:\n        \"value\" in propertyDescriptor\n          ? valueToIdentifier(propertyDescriptor.value, [\n              ...path,\n              String(propertyNameOrSymbol),\n              \"[[descriptor:value]]\",\n            ])\n          : undefined,\n    }\n  }\n\n  const computeMethodDescriptionArray = (value, path) => {\n    const methodDescriptionArray = []\n\n    if (typeof Set === \"function\" && value instanceof Set) {\n      const callArray = []\n      value.forEach((entryValue, index) => {\n        const entryValueIdentifier = valueToIdentifier(entryValue, [\n          ...path,\n          `[[SetEntryValue]]`,\n          index,\n        ])\n        callArray.push([entryValueIdentifier])\n      })\n      methodDescriptionArray.push({ methodNameIdentifier: valueToIdentifier(\"add\"), callArray })\n    }\n\n    if (typeof Map === \"function\" && value instanceof Map) {\n      const callArray = []\n      value.forEach((entryValue, entryKey) => {\n        const entryKeyIdentifier = valueToIdentifier(entryKey, [\n          ...path,\n          \"[[MapEntryKey]]\",\n          entryKey,\n        ])\n        const entryValueIdentifier = valueToIdentifier(entryValue, [\n          ...path,\n          \"[[MapEntryValue]]\",\n          entryValue,\n        ])\n        callArray.push([entryKeyIdentifier, entryValueIdentifier])\n      })\n      methodDescriptionArray.push({ methodNameIdentifier: valueToIdentifier(\"set\"), callArray })\n    }\n\n    return methodDescriptionArray\n  }\n\n  const identifierForPrimitive = (value) => {\n    return Object.keys(valueMap).find((existingIdentifier) => {\n      const existingValue = valueMap[existingIdentifier]\n      if (Object.is(value, existingValue)) return true\n      return value === existingValue\n    })\n  }\n\n  const identifierForComposite = (value) => {\n    return Object.keys(valueMap).find((existingIdentifier) => {\n      const existingValue = valueMap[existingIdentifier]\n      return value === existingValue\n    })\n  }\n\n  const identifierForNewValue = (value) => {\n    const identifier = nextIdentifier()\n    valueMap[identifier] = value\n    return identifier\n  }\n\n  let currentIdentifier = -1\n  const nextIdentifier = () => {\n    const identifier = String(parseInt(currentIdentifier) + 1)\n    currentIdentifier = identifier\n    return identifier\n  }\n\n  const mainIdentifier = valueToIdentifier(mainValue)\n\n  // prototype, important to keep after the whole structure was visited\n  // so that we discover if any prototype is part of the value\n  const prototypeValueToIdentifier = (prototypeValue) => {\n    // prototype is null\n    if (prototypeValue === null) return valueToIdentifier(prototypeValue)\n\n    // prototype found somewhere already\n    const prototypeExistingIdentifier = identifierForComposite(prototypeValue)\n    if (prototypeExistingIdentifier !== undefined) return prototypeExistingIdentifier\n\n    // mark prototype as visited\n    const prototypeIdentifier = identifierForNewValue(prototypeValue)\n\n    // prototype is a global reference ?\n    const prototypeGlobalPath = getCompositeGlobalPath(prototypeValue)\n    if (prototypeGlobalPath) {\n      recipeArray[prototypeIdentifier] = createGlobalReferenceRecipe(prototypeGlobalPath)\n      return prototypeIdentifier\n    }\n\n    // otherwise prototype is unknown\n    if (prototypeStrict) {\n      throw new Error(createUnknownPrototypeMessage({ prototypeValue }))\n    }\n\n    return prototypeValueToIdentifier(Object.getPrototypeOf(prototypeValue), true)\n  }\n  const identifierForValueOf = (value, path = []) => {\n    if (value instanceof Array) return valueToIdentifier(value.length, [...path, \"length\"])\n\n    if (\"valueOf\" in value === false) return undefined\n\n    if (typeof value.valueOf !== \"function\") return undefined\n\n    const valueOfReturnValue = value.valueOf()\n    if (!isComposite(valueOfReturnValue))\n      return valueToIdentifier(valueOfReturnValue, [...path, \"valueOf()\"])\n\n    if (valueOfReturnValue === value) return undefined\n\n    throw new Error(createUnexpectedValueOfReturnValueMessage())\n  }\n\n  recipeArray.slice().forEach((recipe, index) => {\n    if (recipe.type === \"composite\") {\n      const value = valueMap[index]\n\n      if (typeof value === \"function\") {\n        const valueOfIdentifier = nextIdentifier()\n        recipeArray[valueOfIdentifier] = {\n          type: \"primitive\",\n          value,\n        }\n        recipe.valueOfIdentifier = valueOfIdentifier\n        return\n      }\n\n      if (value instanceof RegExp) {\n        const valueOfIdentifier = nextIdentifier()\n        recipeArray[valueOfIdentifier] = {\n          type: \"primitive\",\n          value,\n        }\n        recipe.valueOfIdentifier = valueOfIdentifier\n        return\n      }\n\n      // valueOf, mandatory to uneval new Date(10) for instance.\n      recipe.valueOfIdentifier = identifierForValueOf(value)\n      const prototypeValue = Object.getPrototypeOf(value)\n      recipe.prototypeIdentifier = prototypeValueToIdentifier(prototypeValue, true)\n    }\n  })\n\n  return {\n    recipeArray,\n    mainIdentifier,\n    valueMap,\n  }\n}\n\nconst primitiveToRecipe = (value) => {\n  if (typeof value === \"symbol\") return symbolToRecipe(value)\n\n  return createPimitiveRecipe(value)\n}\n\nconst symbolToRecipe = (symbol) => {\n  const globalSymbolKey = Symbol.keyFor(symbol)\n  if (globalSymbolKey !== undefined) return createGlobalSymbolRecipe(globalSymbolKey)\n\n  const symbolGlobalPath = getPrimitiveGlobalPath(symbol)\n  if (!symbolGlobalPath) throw new Error(createUnknownSymbolMessage({ symbol }))\n\n  return createGlobalReferenceRecipe(symbolGlobalPath)\n}\n\nconst createPimitiveRecipe = (value) => {\n  return {\n    type: \"primitive\",\n    value,\n  }\n}\n\nconst createGlobalReferenceRecipe = (path) => {\n  const recipe = {\n    type: \"global-reference\",\n    path,\n  }\n  return recipe\n}\n\nconst createGlobalSymbolRecipe = (key) => {\n  return {\n    type: \"global-symbol\",\n    key,\n  }\n}\n\nconst createCompositeRecipe = ({\n  prototypeIdentifier,\n  valueOfIdentifier,\n  propertyDescriptionArray,\n  symbolDescriptionArray,\n  methodDescriptionArray,\n  extensible,\n}) => {\n  return {\n    type: \"composite\",\n    prototypeIdentifier,\n    valueOfIdentifier,\n    propertyDescriptionArray,\n    symbolDescriptionArray,\n    methodDescriptionArray,\n    extensible,\n  }\n}\n\nconst createPromiseAreNotSupportedMessage = ({ path }) => {\n  if (path.length === 0) return `promise are not supported.`\n\n  return `promise are not supported.\npromise found at: ${path.join(\"\")}`\n}\n\nconst createWeakSetAreNotSupportedMessage = ({ path }) => {\n  if (path.length === 0) return `weakSet are not supported.`\n\n  return `weakSet are not supported.\nweakSet found at: ${path.join(\"\")}`\n}\n\nconst createWeakMapAreNotSupportedMessage = ({ path }) => {\n  if (path.length === 0) return `weakMap are not supported.`\n\n  return `weakMap are not supported.\nweakMap found at: ${path.join(\"\")}`\n}\n\nconst createForbiddenFunctionMessage = ({ path }) => {\n  if (path.length === 0) return `function are not allowed.`\n\n  return `function are not allowed.\nfunction found at: ${path.join(\"\")}`\n}\n\nconst createForbiddenPropertyGetterMessage = ({\n  path,\n  propertyNameOrSymbol,\n}) => `property getter are not allowed.\ngetter found on property: ${String(propertyNameOrSymbol)}\nat: ${path.join(\"\")}`\n\nconst createForbiddenPropertySetterMessage = ({\n  path,\n  propertyNameOrSymbol,\n}) => `property setter are not allowed.\nsetter found on property: ${String(propertyNameOrSymbol)}\nat: ${path.join(\"\")}`\n\nconst createUnexpectedValueOfReturnValueMessage = () =>\n  `valueOf() must return a primitive of the object itself.`\n\nconst createUnknownSymbolMessage = ({\n  symbol,\n}) => `symbol must be global, like Symbol.iterator, or created using Symbol.for().\nsymbol: ${symbol.toString()}`\n\nconst createUnknownPrototypeMessage = ({ prototypeValue }) =>\n  `prototype must be global, like Object.prototype, or somewhere in the value.\nprototype constructor name: ${prototypeValue.constructor.name}`\n","// be carefull because this function is mutating recipe objects inside the recipeArray.\n// this is not an issue because each recipe object is not accessible from the outside\n// when used internally by uneval\nexport const sortRecipe = (recipeArray) => {\n  const findInRecipePrototypeChain = (recipe, callback) => {\n    let currentRecipe = recipe\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      if (currentRecipe.type !== \"composite\") break\n      const prototypeIdentifier = currentRecipe.prototypeIdentifier\n      if (prototypeIdentifier === undefined) break\n      currentRecipe = recipeArray[prototypeIdentifier]\n\n      if (callback(currentRecipe, prototypeIdentifier)) return prototypeIdentifier\n    }\n    return undefined\n  }\n\n  const recipeArrayOrdered = recipeArray.slice()\n  recipeArrayOrdered.sort((leftRecipe, rightRecipe) => {\n    const leftType = leftRecipe.type\n    const rightType = rightRecipe.type\n\n    if (leftType === \"composite\" && rightType === \"composite\") {\n      const rightRecipeIsInLeftRecipePrototypeChain = findInRecipePrototypeChain(\n        leftRecipe,\n        (recipeCandidate) => recipeCandidate === rightRecipe,\n      )\n      // if left recipe requires right recipe, left must be after right\n      if (rightRecipeIsInLeftRecipePrototypeChain) return 1\n\n      const leftRecipeIsInRightRecipePrototypeChain = findInRecipePrototypeChain(\n        rightRecipe,\n        (recipeCandidate) => recipeCandidate === leftRecipe,\n      )\n      // if right recipe requires left recipe, right must be after left\n      if (leftRecipeIsInRightRecipePrototypeChain) return -1\n    }\n\n    if (leftType !== rightType) {\n      // if left is a composite, left must be after right\n      if (leftType === \"composite\") return 1\n      // if right is a composite, right must be after left\n      if (rightType === \"composite\") return -1\n    }\n\n    const leftIndex = recipeArray.indexOf(leftRecipe)\n    const rightIndex = recipeArray.indexOf(rightRecipe)\n    // left was before right, don't change that\n    if (leftIndex < rightIndex) return -1\n    // right was after left, don't change that\n    return 1\n  })\n\n  return recipeArrayOrdered\n}\n","// https://github.com/joliss/js-string-escape/blob/master/index.js\n// http://javascript.crockford.com/remedial.html\nexport const escapeString = (value) => {\n  const string = String(value)\n  let i = 0\n  const j = string.length\n  var escapedString = \"\"\n  while (i < j) {\n    const char = string[i]\n    let escapedChar\n    if (char === '\"' || char === \"'\" || char === \"\\\\\") {\n      escapedChar = `\\\\${char}`\n    } else if (char === \"\\n\") {\n      escapedChar = \"\\\\n\"\n    } else if (char === \"\\r\") {\n      escapedChar = \"\\\\r\"\n    } else if (char === \"\\u2028\") {\n      escapedChar = \"\\\\u2028\"\n    } else if (char === \"\\u2029\") {\n      escapedChar = \"\\\\u2029\"\n    } else {\n      escapedChar = char\n    }\n    escapedString += escapedChar\n    i++\n  }\n  return escapedString\n}\n","import { decompose } from \"./internal/decompose.js\"\nimport { sortRecipe } from \"./internal/sortRecipe.js\"\nimport { escapeString } from \"./internal/escapeString.js\"\n\nexport const uneval = (value, { functionAllowed = false, prototypeStrict = false } = {}) => {\n  const { recipeArray, mainIdentifier, valueMap } = decompose(value, {\n    functionAllowed,\n    prototypeStrict,\n  })\n  const recipeArraySorted = sortRecipe(recipeArray)\n\n  let source = `(function () {\nObject.defineProperty(Object.prototype, \"__global__\", {\n  get: function () { return this },\n  configurable: true,\n});\nvar globalObject = __global__;\ndelete Object.prototype.__global__;\n\nfunction safeDefineProperty(object, propertyNameOrSymbol, descriptor) {\n  var currentDescriptor = Object.getOwnPropertyDescriptor(object, propertyNameOrSymbol);\n  if (currentDescriptor && !currentDescriptor.configurable) return\n  Object.defineProperty(object, propertyNameOrSymbol, descriptor)\n};\n`\n\n  const variableNameMap = {}\n  recipeArray.forEach((recipe, index) => {\n    const indexSorted = recipeArraySorted.indexOf(recipe)\n    variableNameMap[index] = `_${indexSorted}`\n  })\n\n  const identifierToVariableName = (identifier) => variableNameMap[identifier]\n\n  const recipeToSetupSource = (recipe) => {\n    if (recipe.type === \"primitive\") return primitiveRecipeToSetupSource(recipe)\n    if (recipe.type === \"global-symbol\") return globalSymbolRecipeToSetupSource(recipe)\n    if (recipe.type === \"global-reference\") return globalReferenceRecipeToSetupSource(recipe)\n    return compositeRecipeToSetupSource(recipe)\n  }\n\n  const primitiveRecipeToSetupSource = ({ value }) => {\n    if (typeof value === \"string\") return `\"${escapeString(value)}\";`\n    if (Object.is(value, -0)) return \"-0;\"\n    return `${String(value)};`\n  }\n\n  const globalSymbolRecipeToSetupSource = (recipe) => {\n    return `Symbol.for(\"${escapeString(recipe.key)}\");`\n  }\n\n  const globalReferenceRecipeToSetupSource = (recipe) => {\n    const pathSource = recipe.path.map((part) => `[\"${escapeString(part)}\"]`).join(\"\")\n    return `globalObject${pathSource};`\n  }\n\n  const compositeRecipeToSetupSource = ({ prototypeIdentifier, valueOfIdentifier }) => {\n    if (prototypeIdentifier === undefined) return identifierToVariableName(valueOfIdentifier)\n\n    const prototypeValue = valueMap[prototypeIdentifier]\n    if (prototypeValue === null) return `Object.create(null);`\n\n    const prototypeConstructor = prototypeValue.constructor\n    if (prototypeConstructor === Object)\n      return `Object.create(${identifierToVariableName(prototypeIdentifier)});`\n\n    if (valueOfIdentifier === undefined) return `new ${prototypeConstructor.name}();`\n\n    return `new ${prototypeConstructor.name}(${identifierToVariableName(valueOfIdentifier)});`\n  }\n\n  recipeArraySorted.forEach((recipe) => {\n    const recipeVariableName = identifierToVariableName(recipeArray.indexOf(recipe))\n    source += `var ${recipeVariableName} = ${recipeToSetupSource(recipe, recipeVariableName)}\n`\n  })\n\n  const recipeToMutateSource = (recipe, recipeVariableName) => {\n    if (recipe.type === \"composite\")\n      return compositeRecipeToMutateSource(recipe, recipeVariableName)\n    return ``\n  }\n\n  const compositeRecipeToMutateSource = (\n    { propertyDescriptionArray, symbolDescriptionArray, methodDescriptionArray, extensible },\n    recipeVariableName,\n  ) => {\n    let mutateSource = ``\n\n    propertyDescriptionArray.forEach(({ propertyNameIdentifier, propertyDescription }) => {\n      mutateSource += generateDefinePropertySource(\n        recipeVariableName,\n        propertyNameIdentifier,\n        propertyDescription,\n      )\n    })\n\n    symbolDescriptionArray.forEach(({ symbolIdentifier, propertyDescription }) => {\n      mutateSource += generateDefinePropertySource(\n        recipeVariableName,\n        symbolIdentifier,\n        propertyDescription,\n      )\n    })\n\n    methodDescriptionArray.forEach(({ methodNameIdentifier, callArray }) => {\n      mutateSource += generateMethodCallSource(recipeVariableName, methodNameIdentifier, callArray)\n    })\n\n    if (!extensible) {\n      mutateSource += generatePreventExtensionSource(recipeVariableName)\n    }\n\n    return mutateSource\n  }\n\n  const generateDefinePropertySource = (\n    recipeVariableName,\n    propertyNameOrSymbolIdentifier,\n    propertyDescription,\n  ) => {\n    const propertyOrSymbolVariableName = identifierToVariableName(propertyNameOrSymbolIdentifier)\n\n    const propertyDescriptorSource = generatePropertyDescriptorSource(propertyDescription)\n    return `safeDefineProperty(${recipeVariableName}, ${propertyOrSymbolVariableName}, ${propertyDescriptorSource});`\n  }\n\n  const generatePropertyDescriptorSource = ({\n    configurable,\n    writable,\n    enumerable,\n    getIdentifier,\n    setIdentifier,\n    valueIdentifier,\n  }) => {\n    if (valueIdentifier === undefined) {\n      return `{\n  configurable: ${configurable},\n  enumerable: ${enumerable},\n  get: ${getIdentifier === undefined ? undefined : identifierToVariableName(getIdentifier)},\n  set: ${setIdentifier === undefined ? undefined : identifierToVariableName(setIdentifier)},\n}`\n    }\n\n    return `{\n  configurable: ${configurable},\n  writable: ${writable},\n  enumerable: ${enumerable},\n  value: ${valueIdentifier === undefined ? undefined : identifierToVariableName(valueIdentifier)}\n}`\n  }\n\n  const generateMethodCallSource = (recipeVariableName, methodNameIdentifier, callArray) => {\n    let methodCallSource = ``\n\n    const methodVariableName = identifierToVariableName(methodNameIdentifier)\n    callArray.forEach((argumentIdentifiers) => {\n      const argumentVariableNames = argumentIdentifiers.map((argumentIdentifier) =>\n        identifierToVariableName(argumentIdentifier),\n      )\n\n      methodCallSource += `${recipeVariableName}[${methodVariableName}](${argumentVariableNames.join(\n        \",\",\n      )});`\n    })\n\n    return methodCallSource\n  }\n\n  const generatePreventExtensionSource = (recipeVariableName) => {\n    return `Object.preventExtensions(${recipeVariableName});`\n  }\n\n  recipeArraySorted.forEach((recipe) => {\n    const recipeVariableName = identifierToVariableName(recipeArray.indexOf(recipe))\n    source += `${recipeToMutateSource(recipe, recipeVariableName)}`\n  })\n\n  source += `return ${identifierToVariableName(mainIdentifier)}; })()`\n\n  return source\n}\n"],"names":["isComposite","value","type","compositeWellKnownMap","WeakMap","primitiveWellKnownMap","Map","getCompositeGlobalPath","get","getPrimitiveGlobalPath","visitGlobalObject","visitValue","path","has","set","visitProperty","property","descriptor","Object","getOwnPropertyDescriptor","e","name","propertyValue","getOwnPropertyNames","forEach","getOwnPropertySymbols","symbol","window","global","decompose","mainValue","functionAllowed","prototypeStrict","valueMap","recipeArray","valueToIdentifier","existingIdentifier","identifierForPrimitive","undefined","identifier","identifierForNewValue","primitiveToRecipe","Promise","Error","createPromiseAreNotSupportedMessage","WeakSet","createWeakSetAreNotSupportedMessage","createWeakMapAreNotSupportedMessage","createForbiddenFunctionMessage","identifierForComposite","compositeGlobalPath","createGlobalReferenceRecipe","propertyDescriptionArray","propertyName","propertyDescriptor","propertyNameIdentifier","propertyDescription","computePropertyDescription","push","symbolDescriptionArray","symbolIdentifier","toString","methodDescriptionArray","computeMethodDescriptionArray","extensible","isExtensible","createCompositeRecipe","propertyNameOrSymbol","createForbiddenPropertySetterMessage","createForbiddenPropertyGetterMessage","configurable","writable","enumerable","getIdentifier","String","setIdentifier","valueIdentifier","Set","callArray","entryValue","index","entryValueIdentifier","methodNameIdentifier","entryKey","entryKeyIdentifier","keys","find","existingValue","is","nextIdentifier","currentIdentifier","parseInt","mainIdentifier","prototypeValueToIdentifier","prototypeValue","prototypeExistingIdentifier","prototypeIdentifier","prototypeGlobalPath","createUnknownPrototypeMessage","getPrototypeOf","identifierForValueOf","Array","length","valueOf","valueOfReturnValue","createUnexpectedValueOfReturnValueMessage","slice","recipe","valueOfIdentifier","RegExp","symbolToRecipe","createPimitiveRecipe","globalSymbolKey","Symbol","keyFor","createGlobalSymbolRecipe","symbolGlobalPath","createUnknownSymbolMessage","key","join","constructor","sortRecipe","findInRecipePrototypeChain","callback","currentRecipe","recipeArrayOrdered","sort","leftRecipe","rightRecipe","leftType","rightType","rightRecipeIsInLeftRecipePrototypeChain","recipeCandidate","leftRecipeIsInRightRecipePrototypeChain","leftIndex","indexOf","rightIndex","escapeString","string","i","j","escapedString","char","escapedChar","uneval","recipeArraySorted","source","variableNameMap","indexSorted","identifierToVariableName","recipeToSetupSource","primitiveRecipeToSetupSource","globalSymbolRecipeToSetupSource","globalReferenceRecipeToSetupSource","compositeRecipeToSetupSource","pathSource","map","part","prototypeConstructor","recipeVariableName","recipeToMutateSource","compositeRecipeToMutateSource","mutateSource","generateDefinePropertySource","generateMethodCallSource","generatePreventExtensionSource","propertyNameOrSymbolIdentifier","propertyOrSymbolVariableName","propertyDescriptorSource","generatePropertyDescriptorSource","methodCallSource","methodVariableName","argumentIdentifiers","argumentVariableNames","argumentIdentifier"],"mappings":"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"}